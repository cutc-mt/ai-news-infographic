<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP問題とClaude Skills解決策</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .problem-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .problem-box h3 {
            color: #d39e00;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .solution-box {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .solution-box h3 {
            color: #155724;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            display: block;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 0.95em;
        }

        .comparison-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .pro-box, .con-box {
            padding: 20px;
            border-radius: 10px;
        }

        .pro-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        .con-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        .pro-box h4, .con-box h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .pro-box h4 {
            color: #155724;
        }

        .con-box h4 {
            color: #721c24;
        }

        ul {
            margin-left: 20px;
        }

        li {
            margin: 10px 0;
            line-height: 1.8;
        }

        .highlight {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }

        .highlight h3 {
            color: #155724;
            margin-bottom: 15px;
        }

        .code-example {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .workflow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .workflow-step {
            text-align: center;
            padding: 20px;
            flex: 1;
            min-width: 150px;
        }

        .workflow-step i {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 10px;
        }

        .workflow-arrow {
            font-size: 2em;
            color: #667eea;
        }

        .warning {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .warning h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .pros-cons {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-exclamation-triangle"></i> MCP問題とClaude Skills解決策</h1>
            <p class="subtitle">トークン効率を劇的に改善する新しいアプローチ</p>
        </header>

        <div class="content">
            <!-- 問題の概要 -->
            <div class="section">
                <h2><i class="fas fa-bug"></i> MCPの根本的な問題</h2>
                <div class="problem-box">
                    <h3><i class="fas fa-exclamation-circle"></i> トークン消費と文脈劣化</h3>
                    <p>MCPプロトコルは過去1年間でAIエージェントとツール・データを接続する標準となったが、深刻な欠陥が明らかに。</p>
                    <ul>
                        <li><strong>トークン非効率:</strong> MCPサーバーは極めて非効率でトークンを大量消費</li>
                        <li><strong>硬直性:</strong> 柔軟性に欠け、エージェントの能力を制限</li>
                        <li><strong>文脈の膨張:</strong> 能力を増やすほど文脈ウィンドウが肥大化</li>
                    </ul>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">97K</span>
                        <span class="stat-label">5つのMCPサーバーで<br>消費されるトークン数</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">48%</span>
                        <span class="stat-label">Claude Sonnet 4.5の<br>文脈ウィンドウ使用率</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">0</span>
                        <span class="stat-label">最初のメッセージ送信前の<br>ユーザー入力トークン</span>
                    </div>
                </div>
            </div>

            <!-- 具体例 -->
            <div class="section">
                <h2><i class="fas fa-microscope"></i> 実例で見る問題の深刻さ</h2>
                <p>5つの標準的なAIコーディング用MCPサーバーの例:</p>

                <div class="warning">
                    <h4><i class="fas fa-exclamation-triangle"></i> 警告</h4>
                    <p>これらすべてを同時に使用することは<strong>絶対に推奨されません</strong>。各サーバーが数千トークンを消費し、AIエージェントの能力記述だけで文脈ウィンドウを圧迫します。</p>
                </div>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>影響</th>
                            <th>詳細</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>会話開始前の消費</strong></td>
                            <td>最初のメッセージを送る前に、すでに大量のトークンが消費される</td>
                        </tr>
                        <tr>
                            <td><strong>LLMの過負荷</strong></td>
                            <td>モダンLLMでも処理可能だが、優雅には扱えない - GPT-3.5時代に逆戻り</td>
                        </tr>
                        <tr>
                            <td><strong>能力の制限</strong></td>
                            <td>2022年のLLMは数個のツールしか扱えなかった。現在は改善したが、まだ制限がある</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 解決策 -->
            <div class="section">
                <h2><i class="fas fa-lightbulb"></i> 解決策: コード実行とリアルタイム発見</h2>

                <div class="solution-box">
                    <h3><i class="fas fa-check-circle"></i> 新しいアプローチ</h3>
                    <p>能力をエージェントに与えつつ、<strong>必要な時だけ</strong>読み込む方法が必要。</p>

                    <div class="highlight">
                        <h3>キーコンセプト</h3>
                        <ul>
                            <li><strong>リアルタイム発見:</strong> ツールの定義を事前に全て読み込むのではなく、必要な時に発見</li>
                            <li><strong>オンザフライ生成:</strong> エージェントが必要に応じて能力を生成</li>
                            <li><strong>コード実行:</strong> Anthropicが記事で強調する中心的概念</li>
                        </ul>
                    </div>
                </div>

                <div class="workflow">
                    <div class="workflow-step">
                        <i class="fas fa-folder"></i>
                        <p><strong>能力フォルダ</strong><br>検索可能な能力の保管場所</p>
                    </div>
                    <span class="workflow-arrow">→</span>
                    <div class="workflow-step">
                        <i class="fas fa-search"></i>
                        <p><strong>リアルタイム検索</strong><br>必要な時に能力を発見</p>
                    </div>
                    <span class="workflow-arrow">→</span>
                    <div class="workflow-step">
                        <i class="fas fa-code"></i>
                        <p><strong>コード読み込み</strong><br>特定機能のコードのみ</p>
                    </div>
                    <span class="workflow-arrow">→</span>
                    <div class="workflow-step">
                        <i class="fas fa-play"></i>
                        <p><strong>実行</strong><br>エージェントが実行</p>
                    </div>
                </div>

                <p><strong>従来のMCP:</strong> すべてのツール定義を最初から読み込む<br>
                <strong>新アプローチ:</strong> ユーザークエリに基づいて、関連する能力のみを読み込む</p>
            </div>

            <!-- Claude Skills -->
            <div class="section">
                <h2><i class="fas fa-star"></i> Claude Skills: 実践的な解決策</h2>

                <div class="highlight">
                    <h3>Claude Skillsの特徴</h3>
                    <p>Anthropicが最近リリースした、MCP問題の解決策を体現するツール。</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">2-3%</span>
                        <span class="stat-label">MCPと比較した<br>会話開始時のトークン使用率</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">数文</span>
                        <span class="stat-label">スキルの説明に必要な<br>テキスト量</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">数十</span>
                        <span class="stat-label">同時に使用可能な<br>スキル数</span>
                    </div>
                </div>

                <h3>動作の仕組み</h3>
                <ol>
                    <li><strong>最小限の初期情報:</strong> スキルの短い説明文のみを会話開始時に提供（数百トークン vs 数千トークン）</li>
                    <li><strong>オンデマンド読み込み:</strong> エージェントがスキルを使用する決定をした時に、完全な命令セットとコードを読み込む</li>
                    <li><strong>部分読み込み:</strong> すべてのコードを読み込む必要なし - 利用可能な関数と使用方法の説明のみ</li>
                    <li><strong>コード生成:</strong> エージェントがAPI操作のためのスクリプトを生成</li>
                    <li><strong>コード再利用:</strong> 生成されたコードを保存して将来の使用に備える</li>
                </ol>
            </div>

            <!-- 比較 -->
            <div class="section">
                <h2><i class="fas fa-balance-scale"></i> MCP vs Claude Skills: トレードオフ</h2>

                <div class="pros-cons">
                    <div class="pro-box">
                        <h4><i class="fas fa-shield-alt"></i> MCPサーバーの利点（制御重視）</h4>
                        <ul>
                            <li><strong>予測可能性:</strong> "見たものが得られる" - ツールを明確に定義</li>
                            <li><strong>制御:</strong> エージェントがツールをどう使うか制御可能</li>
                            <li><strong>認証管理:</strong> 環境変数や認証情報の設定が明確</li>
                            <li><strong>能力の見落とし減少:</strong> すべてが事前に提示されるため、検索不要</li>
                            <li><strong>セキュリティ:</strong> 任意のコード生成がないため安全</li>
                        </ul>
                    </div>

                    <div class="pro-box">
                        <h4><i class="fas fa-rocket"></i> Claude Skillsの利点（柔軟性重視）</h4>
                        <ul>
                            <li><strong>トークン効率:</strong> 初期トークン使用量が劇的に少ない</li>
                            <li><strong>スケーラビリティ:</strong> 文脈を圧迫せず、数十の能力を提供可能</li>
                            <li><strong>柔軟性:</strong> エージェントがタスクに合わせたワークフローを定義</li>
                            <li><strong>適応性:</strong> 複数のAPI呼び出しを組み合わせて独自ソリューション作成</li>
                            <li><strong>コード再利用:</strong> 生成したスクリプトを保存して効率化</li>
                        </ul>
                    </div>
                </div>

                <div class="con-box" style="margin-top: 20px;">
                    <h4><i class="fas fa-exclamation-circle"></i> 課題と考慮事項</h4>
                    <ul>
                        <li><strong>セキュリティ:</strong> コード実行にはサンドボックス環境が必要</li>
                        <li><strong>複雑性:</strong> 実装がより複雑になる可能性</li>
                        <li><strong>環境変数管理:</strong> Skillsでの認証情報管理方法がまだ未確立</li>
                        <li><strong>能力の見落とし:</strong> 検索・発見プロセスで一部の能力を見逃す可能性</li>
                    </ul>
                </div>
            </div>

            <!-- 実例: Archon -->
            <div class="section">
                <h2><i class="fas fa-flask"></i> 実践例: ArchonのMCP→Skills移行</h2>

                <p>オープンソースプロジェクト「Archon」をMCPサーバーからSkillsに変換した実験:</p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">数千</span>
                        <span class="stat-label">MCPサーバー版の<br>初期トークン数</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">数百</span>
                        <span class="stat-label">Skills版の<br>初期トークン数</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">機能の互換性<br>（全機能が動作）</span>
                    </div>
                </div>

                <div class="highlight">
                    <h3>主な発見</h3>
                    <ul>
                        <li>すべての機能がSkills版でも動作</li>
                        <li>トークン効率が劇的に改善</li>
                        <li>エージェントがArchon APIと直接やり取りするコードを生成</li>
                        <li>他の多数のスキルと組み合わせても90,000トークンの上限に達しない</li>
                    </ul>
                </div>
            </div>

            <!-- 未来展望 -->
            <div class="section">
                <h2><i class="fas fa-crystal-ball"></i> MCPの終焉か？答えは「NO」</h2>

                <div class="solution-box">
                    <h3>MCPは終わらない - その理由</h3>
                    <p>MCPには依然として価値がある:</p>
                    <ul>
                        <li><strong>明確性:</strong> ツール定義が明示的で分かりやすい</li>
                        <li><strong>安定性:</strong> 予測可能な動作</li>
                        <li><strong>シンプルさ:</strong> プラグアンドプレイで簡単に能力追加</li>
                        <li><strong>リスク低減:</strong> 任意コード実行のリスクがない</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>未来の予測</h3>
                    <p><strong>柔軟性が制御を上回る</strong>と予想される理由:</p>
                    <ul>
                        <li><strong>LLMの進化:</strong> モデルが強力になるにつれ、コード実行への信頼が向上</li>
                        <li><strong>自律性の向上:</strong> AIエージェントは本来自律的であるべき</li>
                        <li><strong>能力の発見:</strong> より高度な検索・発見能力</li>
                        <li><strong>適応性:</strong> タスクに応じた柔軟な対応</li>
                    </ul>
                    <p style="margin-top: 15px;"><em>しかし、MCPとSkillsは共存し、ユースケースに応じて使い分けられる</em></p>
                </div>
            </div>

            <!-- 重要ポイント -->
            <div class="section">
                <h2><i class="fas fa-key"></i> 重要なポイント</h2>
                <ol style="font-size: 1.1em; line-height: 2;">
                    <li><strong>MCPの問題:</strong> トークン消費が非効率で、文脈ウィンドウを圧迫</li>
                    <li><strong>解決策:</strong> コード実行とリアルタイム能力発見</li>
                    <li><strong>Claude Skills:</strong> 2-3%のトークン使用率でMCPの代替を提供</li>
                    <li><strong>トレードオフ:</strong> 制御（MCP） vs 柔軟性（Skills）</li>
                    <li><strong>未来:</strong> LLMの進化により柔軟性が優位に</li>
                    <li><strong>共存:</strong> MCPは終わらず、用途に応じて使い分け</li>
                </ol>
            </div>
        </div>

        <footer>
            <p><i class="fas fa-video"></i> 元動画: <a href="https://www.youtube.com/watch?v=1_z3h2r93OY" style="color: #84fab0;">YouTube</a></p>
            <p style="margin-top: 10px;">このグラフィックレコーディングは動画の内容を視覚的にまとめたものです</p>
        </footer>
    </div>
</body>
</html>